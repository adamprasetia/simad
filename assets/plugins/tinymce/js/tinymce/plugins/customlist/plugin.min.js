tinymce.PluginManager.add('customlist', function(editor, url) {
	// Add a button that opens a window
	editor.addButton('customlist', {
		text: 'Custom Numbering',
		icon: false,
		onclick: function() {
			// Open window
			editor.windowManager.open({
				title: 'Custom Numbering',
				body: [{
					type: 'listbox',
					name: 'myoptions',
						label: 'My Options',
						values: [{
							text: "Without Parenthesis",
							value: "1"
						}, {
							text: "Default Parenthesis",
							value: "2"
						}, {
							text: "Lower Alpha Parenthesis",
							value: "3"
						}, {
							text: "Lower Greek Parenthesis",
							value: "4"
						}, {
							text: "Lower Roman Parenthesis",
							value: "5"
						}, {
							text: "Upper Alpha Parenthesis",
							value: "6"
						}, {
							text: "Upper Roman Parenthesis",
							value: "7"
						}]
				}],
		
				onsubmit: function(v) {
					var option = v.data.myoptions;
					var cls = '';
					var cls_tab = '';
					if (option==2){
						cls = "kurung";
						cls_tab = ' tab';
					}
					else if (option==3){
						cls = "kurung__lower_alpha";
					}
					else if (option==4){
						cls = "kurung__lower_greek";
					}
					else if (option==5){
						cls = "kurung__lower_roman";
					}
					else if (option==6){
						cls = "kurung__upper_alpha";
					}
					else if (option==7){
						cls = "kurung__upper_roman";
					}
					tinymce.activeEditor.dom.removeClass(tinymce.activeEditor.dom.select('ol'), 'kurung');
					tinymce.activeEditor.dom.removeClass(tinymce.activeEditor.dom.select('ol'), 'kurung__lower_alpha');
					tinymce.activeEditor.dom.removeClass(tinymce.activeEditor.dom.select('ol'), 'kurung__lower_greek');
					tinymce.activeEditor.dom.removeClass(tinymce.activeEditor.dom.select('ol'), 'kurung__lower_roman');
					tinymce.activeEditor.dom.removeClass(tinymce.activeEditor.dom.select('ol'), 'kurung__upper_alpha');
					tinymce.activeEditor.dom.removeClass(tinymce.activeEditor.dom.select('ol'), 'kurung__upper_roman');
					tinymce.activeEditor.dom.removeClass(tinymce.activeEditor.dom.select('ol'), 'tab');
					if(option != 1){
						var slc = tinymce.activeEditor.dom.select('ol');
						for (var i=0; i<slc.length; i++) {
							if(i==0){
								tinymce.activeEditor.dom.addClass(slc[0], cls);
							}else{
								tinymce.activeEditor.dom.addClass(slc[i], cls+cls_tab);
								// tinymce.activeEditor.dom.addClass(slc[i], 'tab');
							}
						}
					}								
				}
			});
		}
	});

	// Adds a menu item to the tools menu
	editor.addMenuItem('customlist', {
		text: 'Custom Numbering',
		context: 'tools',
		onclick: function() {
			// Open window with a specific url
			editor.windowManager.open({
				title: 'TinyMCE site',
				url: 'https://www.tinymce.com',
				width: 800,
				height: 600,
				buttons: [{
					text: 'Close',
					onclick: 'close'
				}]
			});
		}
	});
});